# ~~ Generated by projen. To modify, edit .projenrc.js and run "npx projen".

name: release-docker-image-tilediiif.tools-slim
on:
  push:
    tags:
      - docker/tilediiif.tools-slim-v*
jobs:
  release:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      packages: write
    defaults:
      run:
        shell: bash
    steps:
      - name: Login to GitHub Container registry
        run: echo "${{ secrets.GITHUB_TOKEN }}" | docker login ghcr.io -u "${{
          github.actor }}" --password-stdin
      - uses: actions/checkout@v2
        with:
          fetch-depth: 0
      - run: npx projen build-docker-image:tilediiif.tools-slim
      - run: npx projen push-docker-image:tilediiif.tools-slim
    container:
      image: ghcr.io/cambridge-collection/tilediiif/dev-environment:v0.1.4-tools
      credentials:
        username: ${{ github.actor }}
        password: ${{ secrets.GITHUB_TOKEN }}
